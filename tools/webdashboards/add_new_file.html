<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Add a new file to an existing project - Documentation for Mozilla l10n Drivers</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../products/android-l10n/index.html"><strong aria-hidden="true">2.</strong> Android-l10n</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/android-l10n/adding_new_locales.html"><strong aria-hidden="true">2.1.</strong> Adding new locales</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/index.html"><strong aria-hidden="true">3.</strong> Firefox Desktop</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/firefox_desktop/adding_pontoon.html"><strong aria-hidden="true">3.1.</strong> Add to Pontoon</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/adding_nightly.html"><strong aria-hidden="true">3.2.</strong> Nightly builds</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/adding_release.html"><strong aria-hidden="true">3.3.</strong> Beta/Release builds</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/removing_locales.html"><strong aria-hidden="true">3.4.</strong> Removing locales</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/fluent_migrations.html"><strong aria-hidden="true">3.5.</strong> Fluent migrations</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/firefox_l10n_faqs.html"><strong aria-hidden="true">3.6.</strong> L10N FAQs</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/review/index.html"><strong aria-hidden="true">4.</strong> Review</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/review/signoffs.html"><strong aria-hidden="true">4.1.</strong> Sign-offs</a></li><li class="chapter-item expanded "><a href="../../products/review/review.html"><strong aria-hidden="true">4.2.</strong> Review strings</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/firefox_iOS/index.html"><strong aria-hidden="true">5.</strong> Firefox for iOS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/firefox_iOS/review_iOSstrings.html"><strong aria-hidden="true">5.1.</strong> Reviewing new strings</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/index.html"><strong aria-hidden="true">6.</strong> Mozilla.org</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/mozilla_org/extract_strings.html"><strong aria-hidden="true">6.1.</strong> Process overview</a></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/working_bedrock.html"><strong aria-hidden="true">6.2.</strong> Working with Bedrock</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/import_translations.html"><strong aria-hidden="true">6.3.</strong> Importing translations</a></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/updating_mozillaorg_production.html"><strong aria-hidden="true">6.4.</strong> Updating production</a></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/enable_production.html"><strong aria-hidden="true">6.5.</strong> New locales</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/other/index.html"><strong aria-hidden="true">7.</strong> Other Projects</a></li><li class="chapter-item expanded "><a href="../../products/searchplugins/setup_searchplugins.html"><strong aria-hidden="true">8.</strong> Searchplugins</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/index.html"><strong aria-hidden="true">9.</strong> Pontoon</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tools/pontoon/adding_new_project.html"><strong aria-hidden="true">9.1.</strong> New project</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/adding_new_short_term_project.html"><strong aria-hidden="true">9.2.</strong> New short-term project</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/adding_new_locale.html"><strong aria-hidden="true">9.3.</strong> New locale</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/sending_notifications.html"><strong aria-hidden="true">9.4.</strong> Notifications</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/renaming_a_file.html"><strong aria-hidden="true">9.5.</strong> Renaming a localization file</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/deactivating_users.html"><strong aria-hidden="true">9.6.</strong> Deactivating users</a></li></ol></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/index.html"><strong aria-hidden="true">10.</strong> Web dashboards</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tools/webdashboards/langchecker.html"><strong aria-hidden="true">10.1.</strong> Langchecker</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/bootstrap_new_locale.html"><strong aria-hidden="true">10.2.</strong> Bootstrap a new locale</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/add_locales.html"><strong aria-hidden="true">10.3.</strong> Add locales to an existing file</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/update_existing_file.html"><strong aria-hidden="true">10.4.</strong> Update an existing file</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/remove_obsolete_files.html"><strong aria-hidden="true">10.5.</strong> Remove obsolete files</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/add_new_file.html" class="active"><strong aria-hidden="true">10.6.</strong> Add a new file to an existing project</a></li></ol></li><li class="chapter-item expanded "><a href="../../tools/mercurial/index.html"><strong aria-hidden="true">11.</strong> Mercurial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tools/mercurial/setting_mercurial_environment.html"><strong aria-hidden="true">11.1.</strong> Set up the environment</a></li><li class="chapter-item expanded "><a href="../../tools/mercurial/creating_mercurial_patch.html"><strong aria-hidden="true">11.2.</strong> Create a patch</a></li><li class="chapter-item expanded "><a href="../../tools/mercurial/useful_mercurial_commands.html"><strong aria-hidden="true">11.3.</strong> Useful Mercurial commands</a></li></ol></li><li class="chapter-item expanded "><a href="../../misc/index.html"><strong aria-hidden="true">12.</strong> Other docs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../misc/creating_new_repository.html"><strong aria-hidden="true">12.1.</strong> New l10n repository</a></li><li class="chapter-item expanded "><a href="../../misc/working_w_l10n_agency.html"><strong aria-hidden="true">12.2.</strong> How to work with a Localization Agency</a></li><li class="chapter-item expanded "><a href="../../misc/documentation_styleguide.html"><strong aria-hidden="true">12.3.</strong> Documentation styleguide</a></li><li class="chapter-item expanded "><a href="../../misc/stock_emails.html"><strong aria-hidden="true">12.4.</strong> Stock emails</a></li><li class="chapter-item expanded "><a href="../../config/setup_l10ndrivers_vm.html"><strong aria-hidden="true">12.5.</strong> L10n-drivers VM setup</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Documentation for Mozilla l10n Drivers</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#add-a-new-file-to-an-existing-project" id="add-a-new-file-to-an-existing-project">Add a new file to an existing project</a></h1>
<p>This task can be split into smaller tasks:</p>
<ul>
<li>Add the file to the list of supported files specifying:
<ul>
<li>List of supported locales.</li>
<li>Priority (optional).</li>
<li>Flags (optional).</li>
<li>Deadline (optional).</li>
</ul>
</li>
<li>Add the files to all locales in the l10n repository.</li>
</ul>
<p>To analyze all steps, let’s consider a practical example: you need to add a file called <code>mozorg/contribute/signup.lang</code> to the project <code>www.mozilla.org</code>. The file is priority 1 only for French and German, <code>opt-in</code> for other locales, and deadline is May 30th, 2016. Note that most of the time a file will have the same priority for all locales, and won’t have any flags.</p>
<h2><a class="header" href="#add-the-file-to-the-list-of-supported-files" id="add-the-file-to-the-list-of-supported-files">Add the file to the list of supported files</a></h2>
<p>The file you need to update is <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/sources.inc.php">app/config/sources.inc.php</a>.</p>
<p>In <a href="https://github.com/mozilla-l10n/langchecker/blob/master/app/config/websites.inc.php">app/config/websites.inc.php</a> there is a global array <code>$sites</code> that defines all parameters for each project. For <code>www.mozilla.org</code> it looks like this:</p>
<pre><code class="language-PHP">0 =&gt; [
    'www.mozilla.org',
    $repositories['www.mozilla.org']['local_path'],
    '',
    $mozillaorg,
    $mozillaorg_lang,
    'en-US', // source locale
    $repositories['www.mozilla.org']['public_path'],
    3,
    'lang',
    [],
],
</code></pre>
<p>The array storing all supported files is the 5th element (<code>$mozillaorg_lang</code>). With time you won’t need to check the configuration array, it will be enough to search for a similar file in the same project.</p>
<h3><a class="header" href="#supported-locales" id="supported-locales">Supported locales</a></h3>
<p>Search for the definition of <code>$mozillaorg_lang</code> in <code>app/config/sources.inc.php</code> and add the new file, respecting the existing alphabetical order (snippets represent an exception to this rule). This is how the definition’s begin looks:</p>
<pre><code class="language-PHP">$mozillaorg_lang = [
    'download_button.lang' =&gt; [
        'deadline'          =&gt; '2016-04-29',
        'priority '         =&gt; 1,
        'supported_locales' =&gt; $mozillaorg,
    ],
</code></pre>
<p>Supported locales are defined in each file as an array associated to the key <code>supported_locales</code>. If this key is missing, file will fall back to the list of locales supported for the website (project) it belongs to. For clarity it’s highly suggested to always specify the list of supported locales.</p>
<p>For the list of locales you should check the definition for existing similar files. In this case, you can use the same settings as another <code>contribute</code> pages:</p>
<pre><code class="language-PHP">'mozorg/contribute/index.lang' =&gt; [
    'flags' =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'priority'          =&gt; 2,
    'supported_locales' =&gt; $getinvolved_locales,
],
'mozorg/contribute/signup.lang' =&gt; [
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<h3><a class="header" href="#priority" id="priority">Priority</a></h3>
<p>NOTE: The <em>priority</em> field was used only by the Webdashboard. It can still be used to store a reference to the expected priority.</p>
<p>Priority is optional and can defined for each file. If the priority is the same for all locales, you can assign the integer value (from 1 to 5) to a <code>priority</code> key.</p>
<pre><code class="language-PHP">'mozorg/contribute/index.lang' =&gt; [
    'priority'          =&gt; 2,
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<p>It’s also possible to define a more complex set of priorities using an associative array, where to each priority (a numeric key) is associated an array of locales. <code>all</code> is a special locale to represent all supported locales for this file. For example:</p>
<pre><code class="language-PHP">'priorities'          =&gt; [
    1 =&gt; ['de', 'fr'],
    2 =&gt; ['all'],
],
</code></pre>
<p>If you don’t specify a priority, the file will fall back to the default priority specified for the project (in <code>$sites</code>). In this case the request is to set the file with priority 1 for French and German, while the default for mozilla.org is 3.</p>
<p>In this case, the request is to assign priority 1 only to French and German</p>
<pre><code class="language-PHP">'mozorg/contribute/signup.lang' =&gt; [
    'priority'          =&gt; [
        1 =&gt; ['de', 'fr'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<h3><a class="header" href="#flags" id="flags">Flags</a></h3>
<p>Flag are defined for each file as an array associated to the key <code>flags</code>:</p>
<pre><code class="language-PHP">'mozorg/contribute/index.lang' =&gt; [
    'flags' =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<p>To each flag (key) is associated an array of locales. <code>all</code> is a special locale to represent all supported locales for this file. Flags currently in use are: obsolete, opt-in.</p>
<p>In this case, the request is to flag the file as opt-in for all locales.</p>
<pre><code class="language-PHP">'mozorg/contribute/signup.lang' =&gt; [
    'flags'    =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'priority'          =&gt; [
        1 =&gt; ['de', 'fr'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<h3><a class="header" href="#deadline" id="deadline">Deadline</a></h3>
<p>NOTE: The <em>deadline</em> field was used only by the Webdashboard. It can still be used to store a reference to the expected deadline.</p>
<p>If the deadline is the same for all locales, you can assign the date (as a string in ISO format YYYY-MM-DD) to a <code>deadline</code> key. In this case, deadline needs to be set to May 30th, 2016 (2016-05-30):</p>
<pre><code class="language-PHP">'mozorg/contribute/signup.lang' =&gt; [
    'deadline' =&gt; '2016-05-30',
    'flags'    =&gt; [
        'opt-in' =&gt; ['all'],
    ],
    'priority'          =&gt; [
        1 =&gt; ['de', 'fr'],
    ],
    'supported_locales' =&gt; $getinvolved_locales,
],
</code></pre>
<p>It’s also possible to define different deadlines for locales using an associative array, where to each deadline (date in ISO format YYYY-MM-DD) is associated an array of locales. <code>all</code> is a special locale to represent all supported locales for this file. For example, a deadline for German and French, and a later date for other languages:</p>
<pre><code class="language-PHP">'deadline' =&gt; [
    '2016-05-30' =&gt; ['de', 'fr'],
    '2016-06-15' =&gt; ['all'],
];
</code></pre>
<p>Or a deadline only for French:</p>
<pre><code class="language-PHP">'deadline' =&gt; [
    '2016-05-30' =&gt; ['fr'],
];
</code></pre>
<h2><a class="header" href="#add-the-files-to-all-locales-in-the-l10n-repository" id="add-the-files-to-all-locales-in-the-l10n-repository">Add the files to all locales in the l10n repository</a></h2>
<p>At this point you need to run <code>lang_update</code> to actually add the file to all locales.</p>
<pre><code class="language-BASH">lang_update mozorg/contribute/signup.lang 0 all
</code></pre>
<p>This line updates <code>mozorg/contribute/signup.lang</code>, for website 0 (mozilla.org), for <strong>all</strong> locales.</p>
<p>Move in the l10n repository, make sure to add the file and commit.</p>
<pre><code class="language-BASH">$ trunkst
On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

	(list of all locales and files added)

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

$ git add .
$ git commit -m &quot;Add new page mozorg/contribute/signup.lang&quot;
$ git push
</code></pre>
<p>Note: <code>git add .</code> adds all the new files in the current repository. Make sure to check the list returner by <code>git status</code>, and to check the commit on GitHub after pushing.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../tools/webdashboards/remove_obsolete_files.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../tools/mercurial/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../tools/webdashboards/remove_obsolete_files.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../tools/mercurial/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
