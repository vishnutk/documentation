<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Fluent migrations - Documentation for Mozilla l10n Drivers</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../products/android-l10n/index.html"><strong aria-hidden="true">2.</strong> Android-l10n</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/android-l10n/adding_new_locales.html"><strong aria-hidden="true">2.1.</strong> Adding new locales</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/index.html"><strong aria-hidden="true">3.</strong> Firefox Desktop</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/firefox_desktop/adding_pontoon.html"><strong aria-hidden="true">3.1.</strong> Add to Pontoon</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/adding_nightly.html"><strong aria-hidden="true">3.2.</strong> Nightly builds</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/adding_release.html"><strong aria-hidden="true">3.3.</strong> Beta/Release builds</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/removing_locales.html"><strong aria-hidden="true">3.4.</strong> Removing locales</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/fluent_migrations.html" class="active"><strong aria-hidden="true">3.5.</strong> Fluent migrations</a></li><li class="chapter-item expanded "><a href="../../products/firefox_desktop/firefox_l10n_faqs.html"><strong aria-hidden="true">3.6.</strong> L10N FAQs</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/review/index.html"><strong aria-hidden="true">4.</strong> Review</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/review/signoffs.html"><strong aria-hidden="true">4.1.</strong> Sign-offs</a></li><li class="chapter-item expanded "><a href="../../products/review/review.html"><strong aria-hidden="true">4.2.</strong> Review strings</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/firefox_iOS/index.html"><strong aria-hidden="true">5.</strong> Firefox for iOS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/firefox_iOS/review_iOSstrings.html"><strong aria-hidden="true">5.1.</strong> Reviewing new strings</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/index.html"><strong aria-hidden="true">6.</strong> Mozilla.org</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../products/mozilla_org/extract_strings.html"><strong aria-hidden="true">6.1.</strong> Process overview</a></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/working_bedrock.html"><strong aria-hidden="true">6.2.</strong> Working with Bedrock</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/import_translations.html"><strong aria-hidden="true">6.3.</strong> Importing translations</a></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/updating_mozillaorg_production.html"><strong aria-hidden="true">6.4.</strong> Updating production</a></li><li class="chapter-item expanded "><a href="../../products/mozilla_org/enable_production.html"><strong aria-hidden="true">6.5.</strong> New locales</a></li></ol></li><li class="chapter-item expanded "><a href="../../products/other/index.html"><strong aria-hidden="true">7.</strong> Other Projects</a></li><li class="chapter-item expanded "><a href="../../products/searchplugins/setup_searchplugins.html"><strong aria-hidden="true">8.</strong> Searchplugins</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/index.html"><strong aria-hidden="true">9.</strong> Pontoon</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tools/pontoon/adding_new_project.html"><strong aria-hidden="true">9.1.</strong> New project</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/adding_new_short_term_project.html"><strong aria-hidden="true">9.2.</strong> New short-term project</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/adding_new_locale.html"><strong aria-hidden="true">9.3.</strong> New locale</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/sending_notifications.html"><strong aria-hidden="true">9.4.</strong> Notifications</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/renaming_a_file.html"><strong aria-hidden="true">9.5.</strong> Renaming a localization file</a></li><li class="chapter-item expanded "><a href="../../tools/pontoon/deactivating_users.html"><strong aria-hidden="true">9.6.</strong> Deactivating users</a></li></ol></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/index.html"><strong aria-hidden="true">10.</strong> Web dashboards</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tools/webdashboards/langchecker.html"><strong aria-hidden="true">10.1.</strong> Langchecker</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/bootstrap_new_locale.html"><strong aria-hidden="true">10.2.</strong> Bootstrap a new locale</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/add_locales.html"><strong aria-hidden="true">10.3.</strong> Add locales to an existing file</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/update_existing_file.html"><strong aria-hidden="true">10.4.</strong> Update an existing file</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/remove_obsolete_files.html"><strong aria-hidden="true">10.5.</strong> Remove obsolete files</a></li><li class="chapter-item expanded "><a href="../../tools/webdashboards/add_new_file.html"><strong aria-hidden="true">10.6.</strong> Add a new file to an existing project</a></li></ol></li><li class="chapter-item expanded "><a href="../../tools/mercurial/index.html"><strong aria-hidden="true">11.</strong> Mercurial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tools/mercurial/setting_mercurial_environment.html"><strong aria-hidden="true">11.1.</strong> Set up the environment</a></li><li class="chapter-item expanded "><a href="../../tools/mercurial/creating_mercurial_patch.html"><strong aria-hidden="true">11.2.</strong> Create a patch</a></li><li class="chapter-item expanded "><a href="../../tools/mercurial/useful_mercurial_commands.html"><strong aria-hidden="true">11.3.</strong> Useful Mercurial commands</a></li></ol></li><li class="chapter-item expanded "><a href="../../misc/index.html"><strong aria-hidden="true">12.</strong> Other docs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../misc/creating_new_repository.html"><strong aria-hidden="true">12.1.</strong> New l10n repository</a></li><li class="chapter-item expanded "><a href="../../misc/working_w_l10n_agency.html"><strong aria-hidden="true">12.2.</strong> How to work with a Localization Agency</a></li><li class="chapter-item expanded "><a href="../../misc/documentation_styleguide.html"><strong aria-hidden="true">12.3.</strong> Documentation styleguide</a></li><li class="chapter-item expanded "><a href="../../misc/stock_emails.html"><strong aria-hidden="true">12.4.</strong> Stock emails</a></li><li class="chapter-item expanded "><a href="../../config/setup_l10ndrivers_vm.html"><strong aria-hidden="true">12.5.</strong> L10n-drivers VM setup</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Documentation for Mozilla l10n Drivers</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#fluent-migrations" id="fluent-migrations">Fluent migrations</a></h1>
<p><a href="https://firefox-source-docs.mozilla.org/l10n/migrations/index.html">Fluent migrations</a> are used to migrate existing translations from legacy formats (DTD, properties) to Fluent, or existing Fluent messages to new messages or different FTL files.</p>
<p>At the core of each migration there is a Python file, called <strong>migration recipe</strong>, that instructs the system on how to port existing translations to Fluent. Typically, a patch migrating content to Fluent will:</p>
<ul>
<li>Add new Fluent strings or files.</li>
<li>Remove obsolete strings.</li>
<li>Include a migration recipe.</li>
</ul>
<p>Once such patch lands in <code>mozilla-central</code>, it will be converted as part of the cross-channel generation, and pushed to a quarantine repository (<code>gecko-strings-quarantine</code>). At this point, this new content is not visible yet in <a href="https://pontoon.mozilla.org/">Pontoon</a>.</p>
<p>The goal of migrations is to port existing translations to the new format without forcing community to retranslate them. For that to happen, migrations need to be performed before the new strings are pushed to the official <code>gecko-strings</code> repository, and become available in Pontoon.</p>
<p>This means that patches including migrations should only be pushed from the quarantine repository to <code>gecko-strings</code> following the steps described in this document.</p>
<h2><a class="header" href="#running-fluent-migrations" id="running-fluent-migrations">Running Fluent migrations</a></h2>
<p>This section of the document describes in detail which operations need to be performed in order to run migrations on over 150 Mercurial repositories for Firefox.</p>
<h3><a class="header" href="#prerequisites" id="prerequisites">Prerequisites</a></h3>
<p>Several access rights are required:</p>
<ul>
<li>Write access to <a href="https://hg.mozilla.org/l10n-central">l10n-central</a>, i.e. SSH access with <code>active_scm_l10n</code> rights. It’s possible to check your <em>Access Groups</em> in <a href="https://people.mozilla.org/e#nav-access-groups">your profile on people.mozilla.org</a>.</li>
<li>Sign-off rights in <a href="https://l10n.mozilla.org/">Elmo</a>.</li>
<li>Admin access to <a href="https://pontoon.mozilla.org/">Pontoon</a>.</li>
<li>An account on Heroku with access to <a href="https://dashboard.heroku.com/apps/mozilla-pontoon/resources">Pontoon apps</a>.</li>
</ul>
<p>In order to run migrations:</p>
<ul>
<li>Install the <a href="https://pypi.org/project/fluent.migrate/">fluent.migrate</a> Python package.</li>
<li>Clone all <a href="https://hg.mozilla.org/l10n-central">l10n-central</a> repositories.</li>
<li>Clone <a href="https://hg.mozilla.org/users/axel_mozilla.com/gecko-strings-quarantine/">gecko-strings-quarantine</a> and <a href="https://hg.mozilla.org/l10n/gecko-strings">gecko-strings</a>.</li>
</ul>
<p>A set of scripts to automate cloning and updating of the l10n-central repositories is <a href="https://github.com/flodolo/scripts/tree/master/mozilla_l10n/clone_hgmo">available here</a>.</p>
<h3><a class="header" href="#ensure-there-are-no-blocking-issues-in-gecko-strings-quarantine" id="ensure-there-are-no-blocking-issues-in-gecko-strings-quarantine">Ensure there are no blocking issues in gecko-strings-quarantine</a></h3>
<p>As part of migrations, content needs to be pushed from the quarantine repository to <code>gecko-strings</code>. Since content can’t be pushed selectively, any pending issue needs to be solved before starting the process. For more information about the review process, see <a href="../review/review.html">this document</a>.</p>
<h3><a class="header" href="#clean-up-existing-sign-offs" id="clean-up-existing-sign-offs">Clean up existing sign-offs</a></h3>
<p>Migrations will create new changesets in each of the repositories, resulting in new sign-offs to review for the PM in charge of Firefox or l10n-drivers.</p>
<p>Before starting, sign off in Elmo all available changesets for the current Firefox Beta in the <em>Bulk Sign-offs</em> view. More details about the sign-off process are available in <a href="../review/signoffs.html#bulk-sign-offs">this document</a>.</p>
<p>In case of issues with one or more locales, the best solution is to either fix or unapprove the problematic strings in Pontoon, and wait for the changes to land in the next scheduled sync, in order to completely empty the queue of sign-offs.</p>
<h3><a class="header" href="#stop-sync-in-pontoon" id="stop-sync-in-pontoon">Stop sync in Pontoon</a></h3>
<p>Before starting the migration process, sync needs to be suspended for all projects relying on the l10n-central repositories. The list of affected projects is:</p>
<ul>
<li>Firefox</li>
<li>Thunderbird</li>
<li>Seamonkey</li>
<li>Lightning</li>
</ul>
<p>In order to disable sync, access each project from the <a href="https://pontoon.mozilla.org/admin/">admin panel</a>, and select the checkbox <code>SYNC DISABLED</code> at the bottom of the page, then <code>SAVE PROJECT</code>.</p>
<p>This is needed for several reasons:</p>
<ul>
<li>It removes the chance of conflicts in the l10n repository between the running migration and Pontoon committing changes for other projects.</li>
<li>The migrated strings need to be added in the same cycle as the new strings for the source language (<code>en-US</code>). If they’re added before, Pontoon will ignore them, creating a misalignment between internal database and l10n repositories. If they’re added after, these strings will be displayed as missing in Pontoon, and some locales might try to translate them while it’s not needed.</li>
</ul>
<p>The last step here is to make sure that the current sync process has completed, then increase the resources assigned to the Heroku worker:</p>
<ul>
<li>Check the <a href="https://pontoon.mozilla.org/sync/log/">Sync Logs</a> page, click on the last one, and make sure that there are no projects with <code>---</code> in the <code>DURATION</code> field.</li>
<li>In <a href="https://dashboard.heroku.com/apps/mozilla-pontoon/resources">Heroku</a>, switch the <em>worker</em> from <code>PM</code> (Performance-M dynos) to <code>PL</code> (Performance-L dynos).</li>
</ul>
<p>It’s important to make sure that there is no sync in progress when upgrading the worker, because that will kill any pending process.</p>
<h3><a class="header" href="#test-the-migrations-locally" id="test-the-migrations-locally">Test the migrations locally</a></h3>
<p>A series of tools and helpers to run migrations is available in <a href="https://github.com/flodolo/fluent-migrations">this repository</a>:</p>
<ul>
<li>Clone the repository locally and follow the instructions available in the <a href="https://github.com/flodolo/fluent-migrations/blob/master/README.md">README</a> to set the configuration file.</li>
<li>Add the new migration recipes in the <code>recipes</code> folder. The script will look for any Python file starting with <code>bug_</code> in that folder, so it’s possible to run multiple migrations in one pass. More information about the folder’s structure are available in the repository’s README.</li>
</ul>
<p>At this point, while each migration has been tested as part of the review before landing, it’s always good to run the migration against one locale, e.g. <code>it</code>:</p>
<ul>
<li>Update the locale’s repository, check the results of <code>compare-locales</code>. Assuming l10n repositories are cloned in <code>~/migrations/locales</code>, and the quarantine repository in <code>~/migrations/gecko-strings-quarantine</code>, the command to run is <code>compare-locales ~/migrations/gecko-strings-quarantine/_configs/browser.toml ~/migrations/locales it</code>. Save the output in order to compare it with the results after the migration.</li>
<li>Run the migration, without pushing, only for <code>it</code>: <code>./scripts/migrate it wet-run</code>. Then run compare-locales again, and check if the results are as expected: migrated strings should not appear as missing anymore, and there should be no errors.</li>
<li>If everything looks as expected, re-run the script adding the push option <code>./scripts/migrate it wet-run push</code>.</li>
</ul>
<h3><a class="header" href="#push-updates-to-gecko-strings" id="push-updates-to-gecko-strings">Push updates to gecko-strings</a></h3>
<p>Before <a href="../review/review.html#push-reviewed-strings-to-gecko-strings">pushing updates</a> to the official <a href="https://hg.mozilla.org/l10n/gecko-strings">gecko-strings repository</a>, make sure that:</p>
<ul>
<li>The new strings and migrations are available in the <a href="https://hg.mozilla.org/users/axel_mozilla.com/gecko-strings-quarantine">quarantine repository</a>.</li>
<li>There are <a href="#ensure-there-are-no-blocking-issues-in-gecko-strings-quarantine">no pending issues</a> that prevent the current content to be exposed in Pontoon.</li>
<li>The migration has been tested locally and works as expected.</li>
</ul>
<p>Once the new strings are pushed to <code>gecko-strings</code>, there’s no easy way to roll back, and the procedure needs to be completed before re-enabling sync in Pontoon. The alternative is forcing all locales to retranslate this content, and losing the entire benefit of migrations.</p>
<p>Pontoon relies on a <a href="https://hg.mozilla.org/users/m_owca.info/firefox-central/">different repository</a>, that is generated every 20 minutes based on the content of <code>gecko-strings</code>. That’s why it’s useful to run this update before starting the actual migrations.</p>
<h3><a class="header" href="#run-migrations" id="run-migrations">Run migrations</a></h3>
<p>To run the migration on all repositories, use <code>./scripts/migrate wet-run push</code> in the same environment used for testing. For each repository, this will:</p>
<ul>
<li>Pull changes.</li>
<li>Run the migration and commit changes.</li>
<li>Push changes to the remote.</li>
</ul>
<p>The duration of this step depends on the number of migrations and the speed of the Internet connection, but it should take about 20-30 minutes.</p>
<p>While migrations run, it’s important to look out for errors in the console, even if the standard output is quite noisy:</p>
<ul>
<li>Python errors with a stack trace are unlikely at this stage of the development, since it means that the code encountered a scenario that it’s unable to manage. If something is broken in the <code>fluent.migrate</code> package, or there are issues with Python dependencies, the migration should stop at the very beginning.</li>
<li>For Mercurial, one potential error scenario is a push that would create a new head in the remote repository (<code>abort: push creates new remote head</code>, followed by a changeset ID). The script automatically pulls from the remote repository before running migrations, and Pontoon’s sync is disabled, so that shouldn’t happen, unless a previous migration failed to push to remote and left unsynced local commits. In this case, the easiest solution is to clone the repository for this locale from scratch, and run the migration only for that specific locale.</li>
</ul>
<h3><a class="header" href="#re-enable-sync-in-pontoon" id="re-enable-sync-in-pontoon">Re-enable Sync in Pontoon</a></h3>
<p>Once the actual migration is complete, the next step is to re-enable sync in Pontoon. This needs to be done one project at a time, since Pontoon takes a lot of time processing this amount of changes, creating a bottleneck in the sync for all projects.</p>
<p>Before starting, make sure that the <a href="https://hg.mozilla.org/users/m_owca.info/firefox-central/">Pontoon repository</a> has the commit with the new strings.</p>
<ul>
<li>Access the <a href="https://pontoon.mozilla.org/admin/projects/firefox/">admin panel for Firefox</a>, click the <code>SYNC</code> button at the bottom, then deselect <code>SYNC DISABLED</code> and click <code>SAVE PROJECT</code>.</li>
<li>Clicking the <code>SYNC</code> button will spawn a new sync process just for Firefox. Check the <a href="https://pontoon.mozilla.org/sync/log/">Sync Logs</a> page to see when it’s finished. Depending on the amount of changes, this can require from 15 to over 30 minutes. It’s also possible to monitor the status in Papertrail, accessible from the <a href="https://dashboard.heroku.com/apps/mozilla-pontoon/resources">Resources</a> page in Heroku, and filter the log using the string <code>app/worker</code>.</li>
</ul>
<p>Once the sync is completed, repeat the process for each of the other projects (Thunderbird, Seamonkey, Lightning).</p>
<p>When sync is re-enabled for all projects, switch back the <em>worker</em> to <code>PM</code> in <a href="https://dashboard.heroku.com/apps/mozilla-pontoon/resources">Heroku</a>. Once again, make sure that there are no running sync processes before doing it.</p>
<h3><a class="header" href="#update-sign-offs" id="update-sign-offs">Update sign-offs</a></h3>
<p>At this point all locales with migrated strings will have a new changeset available for sign off. Given that the changes are relatively safe, <a href="../review/signoffs.html#bulk-sign-offs">bulk sign-offs</a> can be used, monitoring only a few locales to double check the output (the only diff will be from the migration).</p>
<p>This can be done concurrently with the previous step.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../products/firefox_desktop/removing_locales.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../products/firefox_desktop/firefox_l10n_faqs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../products/firefox_desktop/removing_locales.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../products/firefox_desktop/firefox_l10n_faqs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
